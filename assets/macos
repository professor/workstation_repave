##!/usr/bin/env bash
#
##### DWF Cribbed from :
## ~/.macos — https://mths.be/macos
#
## Close any open System Preferences panes, to prevent them from overriding
## settings we’re about to change
#osascript -e 'tell application "System Preferences" to quit'
#
################################################################################
## General UI/UX                                                               #
################################################################################
#
## Automatically quit printer app once the print jobs complete
#defaults write com.apple.print.PrintingPrefs "Quit When Finished" -bool true
#
## Fix for the ancient UTF-8 bug in QuickLook (https://mths.be/bbo)
## Commented out, as this is known to cause problems in various Adobe apps :(
## See https://github.com/mathiasbynens/dotfiles/issues/237
#echo "0x08000100:0" > ~/.CFUserTextEncoding
#
## Reveal IP address, hostname, OS version, etc. when clicking the clock
## in the login window
#sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName
#
## see http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_Patterns
#defaults write com.apple.menuextra.clock "DateFormat" 'EEE MMM d  h:mm:ss a' && killall -KILL SystemUIServer
#
## Make the clock analog
##defaults write com.apple.menuextra.clock IsAnalog 1 && killall -KILL SystemUIServer
#
################################################################################
## Trackpad, mouse, keyboard, Bluetooth accessories, and input                 #
################################################################################
#
## Trackpad: enable tap to click for this user and for the login screen
##defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
##defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
##defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
#
## Trackpad: map bottom right corner to right-click
##defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadCornerSecondaryClick -int 2
##defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadRightClick -bool true
##defaults -currentHost write NSGlobalDomain com.apple.trackpad.trackpadCornerClickBehavior -int 1
##defaults -currentHost write NSGlobalDomain com.apple.trackpad.enableSecondaryClick -bool true
#
## Increase sound quality for Bluetooth headphones/headsets
##defaults write com.apple.BluetoothAudioAgent "Apple Bitpool Min (editable)" -int 40
#
## Enable full keyboard access for all controls
## (e.g. enable Tab in modal dialogs)
#defaults write NSGlobalDomain AppleKeyboardUIMode -int 3
#
## Use scroll gesture with the Ctrl (^) modifier key to zoom
#defaults write com.apple.universalaccess closeViewScrollWheelToggle -bool true
#defaults write com.apple.universalaccess HIDScrollZoomModifierMask -int 262144
## Follow the keyboard focus while zoomed in
#defaults write com.apple.universalaccess closeViewZoomFollowsFocus -bool true
#
################################################################################
## Screen                                                                      #
################################################################################
#
## Require password immediately after sleep or screen saver begins
#defaults write com.apple.screensaver askForPassword -int 1
#defaults write com.apple.screensaver askForPasswordDelay -int 0
#
## Save screenshots in PNG format (other options: BMP, GIF, JPG, PDF, TIFF)
#defaults write com.apple.screencapture type -string "png"
#
## Disable shadow in screenshots
#defaults write com.apple.screencapture disable-shadow -bool true
#
## Enable HiDPI display modes (requires restart)
#sudo defaults write /Library/Preferences/com.apple.windowserver DisplayResolutionEnabled -bool true
#
################################################################################
## Finder                                                                      #
################################################################################
#
## Show icons for hard drives, servers, and removable media on the desktop
#defaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool true
#defaults write com.apple.finder ShowHardDrivesOnDesktop -bool true
#defaults write com.apple.finder ShowMountedServersOnDesktop -bool true
#defaults write com.apple.finder ShowRemovableMediaOnDesktop -bool true
#
## Finder: show path bar
#defaults write com.apple.finder ShowPathbar -bool true
#
## Display full POSIX path as Finder window title
#defaults write com.apple.finder _FXShowPosixPathInTitle -bool true
#
## When performing a search, search the current folder by default
#defaults write com.apple.finder FXDefaultSearchScope -string "SCcf"
#
## Avoid creating .DS_Store files on network or USB volumes
#defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
#defaults write com.apple.desktopservices DSDontWriteUSBStores -bool true
#
## Automatically open a new Finder window when a volume is mounted
#defaults write com.apple.frameworks.diskimages auto-open-ro-root -bool true
#defaults write com.apple.frameworks.diskimages auto-open-rw-root -bool true
#defaults write com.apple.finder OpenWindowForNewRemovableDisk -bool true
#
## Use list view in all Finder windows by default
## Four-letter codes for the other view modes: `icnv`, `clmv`, `Flwv`
#defaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"
#
## Enable AirDrop over Ethernet and on unsupported Macs running Lion
#defaults write com.apple.NetworkBrowser BrowseAllInterfaces -bool true
#
## Show the ~/Library folder
#chflags nohidden ~/Library
#
## Show the /Volumes folder
#sudo chflags nohidden /Volumes
#
################################################################################
## Dock, Dashboard, and hot corners                                            #
################################################################################
#
## Enable highlight hover effect for the grid view of a stack (Dock)
#defaults write com.apple.dock mouse-over-hilite-stack -bool true
#
## Set the icon size of Dock items to 36 pixels
#defaults write com.apple.dock tilesize -int 36
#
## Change minimize/maximize window effect
#defaults write com.apple.dock mineffect -string "scale"
#
## Minimize windows into their application’s icon
#defaults write com.apple.dock minimize-to-application -bool true
#
## Enable spring loading for all Dock items
#defaults write com.apple.dock enable-spring-load-actions-on-all-items -bool true
#
## Show indicator lights for open applications in the Dock
#defaults write com.apple.dock show-process-indicators -bool true
#
## Disable Dashboard
#defaults write com.apple.dashboard mcx-disabled -bool true
#
## Don’t show Dashboard as a Space
#defaults write com.apple.dock dashboard-in-overlay -bool true
#
## Don’t automatically rearrange Spaces based on most recent use
#defaults write com.apple.dock mru-spaces -bool false
#
## Automatically hide and show the Dock
#defaults write com.apple.dock autohide -bool true
#
## Make Dock icons of hidden applications translucent
#defaults write com.apple.dock showhidden -bool true
#
## Reset Launchpad, but keep the desktop wallpaper intact
#find "${HOME}/Library/Application Support/Dock" -name "*-*.db" -maxdepth 1 -delete
#
################################################################################
## Terminal & iTerm 2                                                          #
################################################################################
#
## Only use UTF-8 in Terminal.app
#defaults write com.apple.terminal StringEncodings -array 4
#
## Use a modified version of the Solarized Dark theme by default in Terminal.app
#osascript <<EOD
#
#tell application "Terminal"
#
#	local allOpenedWindows
#	local initialOpenedWindows
#	local windowID
#	set themeName to "Solarized Dark xterm-256color"
#
#	(* Store the IDs of all the open terminal windows. *)
#	set initialOpenedWindows to id of every window
#
#	(* Open the custom theme so that it gets added to the list
#	   of available terminal themes (note: this will open two
#	   additional terminal windows). *)
#	do shell script "open '$HOME/init/" & themeName & ".terminal'"
#
#	(* Wait a little bit to ensure that the custom theme is added. *)
#	delay 1
#
#	(* Set the custom theme as the default terminal theme. *)
#	set default settings to settings set themeName
#
#	(* Get the IDs of all the currently opened terminal windows. *)
#	set allOpenedWindows to id of every window
#
#	repeat with windowID in allOpenedWindows
#
#		(* Close the additional windows that were opened in order
#		   to add the custom theme to the list of terminal themes. *)
#		if initialOpenedWindows does not contain windowID then
#			close (every window whose id is windowID)
#
#		(* Change the theme for the initial opened terminal windows
#		   to remove the need to close them in order for the custom
#		   theme to be applied. *)
#		else
#			set current settings of tabs of (every window whose id is windowID) to settings set themeName
#		end if
#
#	end repeat
#
#end tell
#
#EOD
#
## Enable “focus follows mouse” for Terminal.app and all X11 apps
## i.e. hover over a window and start typing in it without clicking first
##defaults write com.apple.terminal FocusFollowsMouse -bool true
##defaults write org.x.X11 wm_ffm -bool true
#
## Enable Secure Keyboard Entry in Terminal.app
## See: https://security.stackexchange.com/a/47786/8918
#defaults write com.apple.terminal SecureKeyboardEntry -bool true
#
## Disable the annoying line marks
#defaults write com.apple.Terminal ShowLineMarks -int 0
#
################################################################################
## Time Machine                                                                #
################################################################################
#
## Prevent Time Machine from prompting to use new hard drives as backup volume
#defaults write com.apple.TimeMachine DoNotOfferNewDisksForBackup -bool true
#
## Disable local Time Machine backups
#hash tmutil &> /dev/null && sudo tmutil disablelocal
#
################################################################################
## Activity Monitor                                                            #
################################################################################
#
## Show the main window when launching Activity Monitor
#defaults write com.apple.ActivityMonitor OpenMainWindow -bool true
#
## Visualize CPU usage in the Activity Monitor Dock icon
#defaults write com.apple.ActivityMonitor IconType -int 5
#
## Show all processes in Activity Monitor
#defaults write com.apple.ActivityMonitor ShowCategory -int 0
#
## Sort Activity Monitor results by CPU usage
#defaults write com.apple.ActivityMonitor SortColumn -string "CPUUsage"
#defaults write com.apple.ActivityMonitor SortDirection -int 0
#
################################################################################
## Address Book, Dashboard, iCal, TextEdit, and Disk Utility                   #
################################################################################
#
## Use plain text mode for new TextEdit documents
#defaults write com.apple.TextEdit RichText -int 0
#
## Open and save files as UTF-8 in TextEdit
#defaults write com.apple.TextEdit PlainTextEncoding -int 4
#defaults write com.apple.TextEdit PlainTextEncodingForWrite -int 4
#
## Enable the debug menu in Disk Utility
#defaults write com.apple.DiskUtility DUDebugMenuEnabled -bool true
#defaults write com.apple.DiskUtility advanced-image-options -bool true
#
################################################################################
## Mac App Store                                                               #
################################################################################
#
## Enable the WebKit Developer Tools in the Mac App Store
#defaults write com.apple.appstore WebKitDeveloperExtras -bool true
#
## Enable Debug Menu in the Mac App Store
#defaults write com.apple.appstore ShowDebugMenu -bool true
#
## Enable the automatic update check
#defaults write com.apple.SoftwareUpdate AutomaticCheckEnabled -bool true
#
## Check for software updates daily, not just once per week
#defaults write com.apple.SoftwareUpdate ScheduleFrequency -int 1
#
## Download newly available updates in background
#defaults write com.apple.SoftwareUpdate AutomaticDownload -int 1
#
## Install System data files & security updates
#defaults write com.apple.SoftwareUpdate CriticalUpdateInstall -int 1
#
## Automatically download apps purchased on other Macs
#defaults write com.apple.SoftwareUpdate ConfigDataInstall -int 1
#
## Turn on app auto-update
#defaults write com.apple.commerce AutoUpdate -bool true
#
## Allow the App Store to reboot machine on macOS updates
#defaults write com.apple.commerce AutoUpdateRestartRequired -bool true
#
################################################################################
## Photos                                                                      #
################################################################################
#
## Prevent Photos from opening automatically when devices are plugged in
#defaults -currentHost write com.apple.ImageCapture disableHotPlug -bool true
#
################################################################################
## Google Chrome & Google Chrome Canary                                        #
################################################################################
#
## Disable the all too sensitive backswipe on trackpads
#defaults write com.google.Chrome AppleEnableSwipeNavigateWithScrolls -bool false
#defaults write com.google.Chrome.canary AppleEnableSwipeNavigateWithScrolls -bool false
#
## Disable the all too sensitive backswipe on Magic Mouse
#defaults write com.google.Chrome AppleEnableMouseSwipeNavigateWithScrolls -bool false
#defaults write com.google.Chrome.canary AppleEnableMouseSwipeNavigateWithScrolls -bool false
#
################################################################################
## Kill affected applications                                                  #
################################################################################
#
#for app in "Activity Monitor" \
#	"Address Book" \
#	"Calendar" \
#	"cfprefsd" \
#	"Contacts" \
#	"Dock" \
#	"Finder" \
#	"Google Chrome" \
#	"Photos" \
#	"Safari" \
#	"SystemUIServer" \
#	"Terminal" \
#	"iCal"; do
#	killall "${app}" &> /dev/null
#done
#echo "Done. Note that some of these changes require a logout/restart to take effect."
